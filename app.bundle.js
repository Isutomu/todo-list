(()=>{"use strict";function t(){const t={...localStorage},e={};return Object.keys(t).forEach((n=>{e[n]=JSON.parse(t[n])})),e}function n(t,e){return void 0===Object.keys(t).find((n=>t[n].name===e))}function s(e){return t()[e].name}function r(t,e,n){const s=t.split("-")[0],r=function(t){return JSON.parse(localStorage.getItem(t))}(s);r.tasks[t][e]=n,function(t,e){localStorage.setItem(t,JSON.stringify(e))}(s,r)}function a(t){return t.split("-")[0]}function o(){document.querySelector("#task-options").setAttribute("display","none"),document.querySelector("#task-options header input").setAttribute("disabled",""),document.querySelector("#duedate").setAttribute("disabled",""),document.querySelector("#task-priority").classList.remove("task-urgent"),document.querySelector("#task-options textarea").setAttribute("disabled","")}function i(e,n){const s=document.createElement("li");return s.setAttribute("data-task-id",e),s.appendChild(void document.createElement("button").addEventListener("click",(e=>{const n=e.target.closest("li");!function(e){const n=t(),s=a(e);delete n[s].tasks[e],localStorage.setItem(s,JSON.stringify(n[s]))}(n.dataset.taskId),n.remove()}))),s.appendChild(function(e){const n=document.createElement("span");n.textContent=e,n.addEventListener("click",(e=>{!function(e){document.querySelector("#task-options").setAttribute("display","grid"),document.querySelector("#task-options").setAttribute("data-task-id",e);const n=function(e){return t()[a(e)].tasks[e]}(e),s=document.querySelector("#task-options header input");s.value=n.name,s.removeAttribute("disabled");const r=document.querySelector("#duedate");r.value=n.dueDate,r.removeAttribute("disabled");const o=document.querySelector("#task-priority");n.priority&&o.classList.add("task-urgent");const i=document.querySelector("#task-options textarea");i.value=n.description,i.removeAttribute("disabled")}(e.target.closest("li").dataset.taskId)}))}(n)),s}function c(e){(function(t){return t===document.querySelector("#list-display").dataset.listId})(e)||(function(t){document.querySelector("#header-list-name").textContent=s(t),document.querySelector("#list-display").dataset.listId=t}(e),function(e){const n=document.querySelector("#tasks-list");n.innerHTML="";const s=function(e){return t()[e].tasks}(e);for(task in s)n.appendChild(i(task,s[task].name))}(e))}function d(e,r){const a=document.createElement("li");return a.setAttribute("data-list-id",e),a.appendChild(function(e){const r=document.createElement("input");return r.value=e,r.addEventListener("click",(t=>{t.target.preventDefault(),c(t.target.closest("li").dataset.listId)})),r.addEventListener("dblclick",(t=>t.target.focus())),r.addEventListener("change",(e=>function(e,r){if(n(r)){!function(e,n){const s=t();s[e].name=n,localStorage.setItem(e,JSON.stringify(s[e]))}(e,r);const n=document.querySelector("#header-list-name");n.closest("section").dataset.listId===e&&(n.textContent=r)}else{const t=document.querySelector(`#list-sidebar li[data-list-id="${e}"] input`);t.setAttribute("disabled",""),t.value(s(e)),t.removeAttribute("disabled")}}(e.target.closest("li").dataset.listId,e.target.value))),r}(r)),a.appendChild(function(){const t=document.createElement("button");return t.textContent="X",t.addEventListener("click",(t=>function(t){!function(t){localStorage.remove(t)}(t),document.querySelector(`#list-display li[data-list-id=${t}]`).remove(),t===document.querySelector("#list-display").dataset.id&&c("0")}(t.target.closest("li").dataset.listId))),t}()),a}function u(t){const e=Object.keys(t[listId].tasks).map((t=>t.split("-")[1]));let n=0;for(;;){if(!e.includes(String(n)))return`${listId}-${n}`;n++}}function l(e,n){const s=function(e,n){const s=t(),r=u(s);return s[e].tasks[r]={name:n,dueDate:"",priority:!1,description:""},localStorage.setItem(e,JSON.stringify(s[e])),r}(e,n);return i(s,n)}localStorage.getItem("0")?c("0"):localStorage.setItem("0",JSON.stringify({name:"My day",tasks:{}})),document.querySelector("#add-list-button").addEventListener("click",(()=>{document.querySelector("#lists-list").appendChild(function(){let e,s;return[e,s]=function(){const e=t(),s=function(t){let e,s="";for(;;){if(e=`Untitled${s}`,n(t,e))return e;s?s++:s=1}}(e),r=function(t){let e=1;for(;;){if(void 0===t[String(e)])return String(e);e++}}(e);return localStorage.setItem(r,JSON.stringify({name:s,tasks:{}})),[r,s]}(),d(e,s)}())})),document.querySelector("#new-task-entry button").addEventListener("click",(()=>{const t=document.querySelector("#new-task-entry input");if(""!==t.value){const e=document.querySelector("#list-display").dataset.listId;document.querySelector("#tasks-list").appendChild(l(e,t.value)),o(),t.value=""}})),document.querySelector("#new-task-entry input").addEventListener("keyword",(t=>{if("Enter"===t.key&&""!==t.target.value){const e=t.target,n=document.querySelector("#list-display").dataset.listId;document.querySelector("#tasks-list").appendChild(l(n,e.value)),o(),e.value=""}})),document.querySelector("#close-tasks-options").addEventListener("click",(()=>{o()})),document.querySelector("#task-options header input").addEventListener("change",(()=>{r(e.target.closest("section").dataset.taskId,"name",e.target.value)})),document.querySelector("#duedate").addEventListener("change",(()=>{r(e.target.closest("section").dataset.taskId,"duedate",e.target.value)})),document.querySelector("#task-priority").addEventListener("click",(()=>{const t=e.target.closest("section").dataset.taskId;e.target.classList.toggle("urgent"),r(t,"urgent",e.target.classList.contains("urgent"))})),document.querySelector("#task-options textarea").addEventListener("change",(()=>{r(e.target.closest("section").dataset.taskId,"description",e.target.value)}))})();
//# sourceMappingURL=app.bundle.js.map